<!DOCTYPE html> 
<html lang="en"> 
  <head>
    <title>Maze Runner</title> 
    <style>
      @charset "utf-8";
      /* CSS Document */
      html,
      html {
        background-color: #383837;
        font-family: Arial, Helvetica, sans-serif;
      }
      #Code {
        position: relative;
        top: 0;
        right: 0;
        width: 60%;
        height: 100%;
        background-color: #383837;
        color: #fff;
        overflow: auto;
        z-index: 100;
      }
    </style>
  </head>
  <body>
    <canvas id="mycanvas"></canvas> 
    <div id="Code">
      <div id="text"
        <h1 id="head">Source Code</h1>
        <p>Embed script done by <a href="https://EmGithub.com">EmGithub.com</a><br> View the full code on my <a href="https://github.com/IvanButBetter/MazeRunner">Github Repository.</a></p>
      </div>
      <div id="embed">
          <code>
            <script id="embd" src="https://emgithub.com/embed-v2.js?target=https%3A%2F%2Fgithub.com%2FIvanButBetter%2FMazeRunner%2Fblob%2Fmain%2FGame.html&style=atom-one-dark&type=code&showLineNumbers=on&showFullPath=on&showCopy=on"></script>
          </code>
      </div>
    </div>
  </body>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/processing.js/1.4.8/processing.js"></script> 
  <script>
     function programCode(processingInstance) {
      with (processingInstance) {
        size(800, 800); 
        frameRate(60);
      // Variables
        var scene = 0;
        var timer = 10;
        var initTimer = 10;
        var isPlaying = false;
        var difficulty = 2;
        var win = 0;
        // Buttons
        var StartBtn = {x: 300, y: 650, width: 150, height: 75, rounding: 10, fill: 166, textSize: 30, text: "Start"};
        var RestartBtn = {x: 300, y: 650, width: 150, height: 75, rounding: 10, fill: 166, textSize: 30, text: "Restart"};
        var TScreenBtn = {x: 600, y: 650, width: 150, height: 75, rounding: 10, fill: 166, textSize: 28, text: "Title Screen"};
        var DiffSelectBtn = {x: 600, y: 650, width: 150, height: 75, rounding: 10, fill: 166, textSize: 20, text: "Difficulty Select"};
        var DiffEasyBtn = {x: 100, y: 600, width: 150, height: 75, rounding: 10, fill: 166, textSize: 30, text: "Easy"};
        var DiffNormalBtn = {x: 350, y: 600, width: 150, height: 75, rounding: 10, fill: 166, textSize: 30, text: "Normal"};
        var DiffHardBtn = {x: 600, y: 600, width: 150, height: 75, rounding: 10, fill: 166, textSize: 30, text: "Hard"};
        
        function btnGen(btn) {  // Function to draw buttons
            fill(btn.fill);
            rect(btn.x, btn.y, btn.width, btn.height, btn.rounding);
            textSize(btn.textSize);
            fill(0);
            textAlign(CENTER, CENTER);
            text(btn.text, btn.x + btn.width / 2, btn.y + btn.height / 2);
        };
        
        function walls(wall) { // Generating Level Objects
          fill(16, 16, 16);
          noStroke();
          rect(wall.x, wall.y, wall.width, wall.height, wall.rounding);
        };
        function winbox(win) { 
          fill(30, 188, 30);
          rect(win.x, win.y, win.width, win.height);
        };
        function MouseClickedCheck(btn) { // Mouse Clicked Check for buttons
            console.log("btn:", btn);
            return (mouseX >= btn.x && mouseX <= (btn.x + btn.width) && mouseY >= btn.y && mouseY <= (btn.y + btn.height));
        };
        function PlayerHitbox(wall) { // Player Hitbox
          if (isPlaying === true) {
            var Hitbox = { // True player hitbox, seperate from model
              x: mouseX - 20,
              y: mouseY - 20,
              width: 40,
              height: 40,
              rounding: 2,
            };
            rect(Hitbox.x, Hitbox.y, Hitbox.width, Hitbox.height, Hitbox.rounding);
            if (Hitbox.x + Hitbox.width >= wall.x && Hitbox.y + Hitbox.height >= wall.y && Hitbox.x <= (wall.x + wall.width) && Hitbox.y <= (wall.y + wall.height)) {
              console.log("Hit detected on", wall);
              gameend();
            };
          };
        };
        function PHWin(win) { // The same player hitbox function, but for the win boxdue to technicallities it needs to be seperate.
          if (isPlaying === true) {
            var HitboxTwo = {
              x: mouseX - 20,
              y: mouseY - 20,
              width: 40,
              height: 45,
            } 
            if (HitboxTwo.x + HitboxTwo.width >= win.x && HitboxTwo.y + HitboxTwo.height >= win.y && HitboxTwo.x <= (win.x + win.width) && HitboxTwo.y <= (win.y + win.height)) {
              scene = scene + 1;
              levelLoad();
              if (scene <= 7) { // Balanced Timers
                timer = timer + 6;
              } if (scene >= 8) {
                timer = timer + 7.5;
              };
            };
          };
        };
        draw = function() {
          level10();
          if (isPlaying === true) {// Draw levels
            textSize(25);
            levelLoad();
            PlayerModel();
            if (difficulty != 1) { // Timer ON/OFF
              Timers();
            };
          } if (isPlaying === false && scene === 666) { // Redraws gameend in order to avoid overlapping drawings.
            gameend();
          };
        };
        function PlayerModel() { // Not the actual hitbox
          if (isPlaying === true) {
            stroke(0)
            strokeWeight(4.5)
            fill(224, 150, 96);
            rect(mouseX - 20, mouseY - 20, 40, 40); // body
            ellipse(mouseX - 5, mouseY - 6, 1, 1); // eyes
            ellipse(mouseX + 5, mouseY - 6, 1, 1);
            strokeWeight(3);
            line(mouseX - 10, mouseY + 10, mouseX + 10, mouseY + 10); // mouth
            line(mouseX, mouseY + 2, mouseX - 2, mouseY + 5);// nose
            line(mouseX - 2, mouseY + 5, mouseX + 2, mouseY + 5);
            line(mouseX - 10, mouseY - 15, mouseX - 1, mouseY - 10); // brows
            line(mouseX + 10, mouseY - 15, mouseX + 1, mouseY - 10);
          };
        };
        function Timers() {
          timer = timer - 1/60; // Set this to your framerate.
          fill(255);
          text(timer, 50, 25);
          PlayerDeath();
          if (isPlaying === false) {
            timer = initTimer; // Reset timer
          };
        };
        function PlayerDeath() {  // Make sure u die
          if (isPlaying === true) {
            if (timer <= 0) {
              isPlaying = false;
              gameend();
            };
          };
        };
        function levelLoad() { // Loads levels based on scene value
          if (scene === 3 && isPlaying === true) {
            level1();
          } if (scene === 4 && isPlaying === true) {
            level2();
          } if (scene === 5 && isPlaying === true) {
            level3();
          } if (scene === 6 && isPlaying === true) {
            level4();
          } if (scene === 7 && isPlaying === true) {
            level5();
          } if (scene === 8 && isPlaying === true) {
            level6();
          } if (scene === 9 && isPlaying === true) {
            level7();
          } if (scene === 10 && isPlaying === true) {
            level8();
          } if (scene === 11 && isPlaying === true) {
            level9();
          } if (scene === 12 && isPlaying === true) {
            level10();
          } if (scene === 13) {
            Credits();
          }
        };

        function GSetup() { // Title Screen, unrelated to the real Setup() in P.js
          scene = 1;
          textAlign(LEFT, TOP);
          background(60);
          fill(255, 255, 255);
          textSize(75);
          text("Maze Runner", 200, 400);
          textSize(45);
          text("Click anywhere to start", 225, 500);
          mouseClicked = function() {
            tutorial();
          };
          if (win >= 1) {
            textSize(25);
            text("You have won " + win + " times.", 10, 10);
          };
        };
        function tutorial() {
          scene = 2;
          console.log(scene);
          textAlign(LEFT, TOP);
          background(60);
          fill(255);
          textSize(75);
          text("How to Play", 50, 50);
          textSize(35);
          text("Your character follows your mouse.", 50, 150);
          text("Do not hit the black walls.", 50, 200);
          text("If you are too slow, you will die.", 50, 250);
          textSize(75);
          text("Objective", 50, 300);
          textSize(35);
          text("With your mouse, guide the cube to escape the maze.", 50, 400, 600, 700);
          fill(240, 0, 0);
          text("The game is meant to be hard, don't give up!", 50, 500);
          fill(255);
          btnGen(StartBtn);
          btnGen(DiffSelectBtn);
          textSize(20);
          textSize(15);
          fill(255);
          text("(Default Difficulty is Normal)", 665, 750);
          mouseClicked = function() {
            if (MouseClickedCheck(StartBtn)) {
              level1();
              isPlaying = true;
            } if (MouseClickedCheck(DiffSelectBtn)) {
              DifficultySelect();
            };
          };
        };
        function DifficultySelect() {
          textAlign(LEFT, TOP);
          scene = 777; // Special Scene
          background(60);
          fill(255);
          textSize(75);
          text("Difficulty Selection", 50, 100);
          textSize(35);
          text("Difficulty is based on the timer.", 10, 200);
          textSize(20);
          text("Hard makes the timer actually have consequences. Intended for experienced players.", 10, 250);
          text("Normal is the default value. Gives you time to make mistakes. This is the default", 10, 300);
          text("Easy is for those who want to take the game slowly without having to worry about time.", 10, 350);
          btnGen(DiffEasyBtn);
          btnGen(DiffNormalBtn);
          btnGen(DiffHardBtn);
          mouseClicked = function() {
            if (MouseClickedCheck(DiffEasyBtn)) {
              difficulty = 1;
              timer = timer + 25;
              initTimer = 35;
              tutorial();
            } if (MouseClickedCheck(DiffNormalBtn)) {
              difficulty = 2;
              initTimer = 10;
              tutorial();
            } if (MouseClickedCheck(DiffHardBtn)) {
              difficulty = 3;
              timer = timer - 5;
              initTimer = 5;
              tutorial();
            };
          };
        };
        function gameend() { // Shows when you die
          console.log("Game Over");
          background(0);
          isPlaying = false;
          scene = 666;
          background(0, 0, 0);
          textSize(75);
          fill(255, 0, 0);
          textAlign(LEFT, TOP);
          text("You Died", 250, 350);
          textSize(45);
          text("Try Again?", 300, 450);
          btnGen(RestartBtn);
          btnGen(TScreenBtn);
          mouseClicked = function() {
            if (MouseClickedCheck(RestartBtn)) {
              level1();
              isPlaying = true;
            } if (MouseClickedCheck(TScreenBtn)) {
              GSetup();
              isPlaying = false;
            };
          };
        };
          // Levels & their walls, collisions, etc.
        function level1() {
          scene = 3;
          noStroke();
          background(98, 98, 98);
          for (var i = 0; i < LevelOneWallsList.length; i++) {
            walls(LevelOneWallsList[i]);
            PlayerHitbox(LevelOneWallsList[i]);
          } winbox(win1);
          PHWin(win1);
        };

        var LevelOneWallsList = [
          {x: 0, y: 0, width: 250, height: 100},
          {x: 0, y: 400, width: 650, height: 150},
          {x: 500, y: 690, width: 900, height: 300},
          {x: 0, y: 400, width: 250, height: 500},
          {x: 200, y: 200, width: 630, height: 100},
          {x: 400, y: 0, width: 800, height: 200},
          {x: 0, y: 0, width: 50, height: 800},
          {x: 775, y: 0, width: 50, height: 800},
          {x: 0, y: 760, width: 800, height: 40}
        ];
        var win1 = {x: 250,y: 0,width: 150,height: 100}

        function level2() {
          scene = 4;
          noStroke();
          background(98, 98, 98);
          winbox(win2); 
          PHWin(win2);
          for (var i = 0; i < LevelTwoWalls.length; i++) {
            walls(LevelTwoWalls[i]);
            PlayerHitbox(LevelTwoWalls[i]);
          };
        };
        var LevelTwoWalls = [
          {x: 0, y: 0, width: 250, height: 410},
          {x: 0, y: 350, width: 650, height: 70},
          {x: 400, y: 0, width: 150, height: 250},
          {x: 650, y: 100, width: 50, height: 320},
          {x: 100, y: 525, width: 800, height: 60},
          {x: 0, y: 685, width: 800, height: 400},
          {x: 785, y: 0, width: 15, height: 550},
          {x: 0, y: 0, width: 20, height: 800},
          {x: 450, y: 0, width: 350, height: 20},
          {x: 0, y: 0, width: 10, height: 800},
          {x: 770, y: 0, width: 30, height: 800},
          {x: 0, y:0, width: 800, height: 30},
        ];
        var win2 = {x: 690,y: 585,width: 80,height: 100};

        function level3() {
          scene = 5;
          noStroke();
          background(98, 98, 98);
          winbox(win3);
          PHWin(win3);
          for (var i = 0; i < LevelThreeWalls.length; i++) {
            walls(LevelThreeWalls[i]);
            PlayerHitbox(LevelThreeWalls[i]);
          };
        };

        var LevelThreeWalls = [
          {x: 350, y: 685, width: 450, height: 20},
          {x: 200, y: 400, width: 150, height: 305},
          {x: 450, y: 500, width: 400, height: 85},
          {x: 700, y: 0, width: 300, height: 400},
          {x: 200, y: 200, width: 400, height: 200},
          {x: 400, y: 0, width: 300, height: 75},
          {x: 200, y: 175, width: 200, height: 200},
          {x: 0, y: 0, width: 800, height: 50},
          {x: 0, y: 0, width: 75, height: 800},
          {x: 0, y: 780, width: 800, height: 25},
          {x: 770, y: 0, width: 30, height: 800}
        ];
        var win3 = {x: 690,y: 705 ,width: 80,height: 75};

        function level4() {
          scene = 6;
          noStroke();
          background(98, 98, 98);
          winbox(win4);
          PHWin(win4);
          for (var i = 0; i < LevelFourWalls.length; i++) {
            walls(LevelFourWalls[i]);
            PlayerHitbox(LevelFourWalls[i]);
          };
        }

        var LevelFourWalls = [
          {x: 500, y: 690, width: 300, height: 14},
          {x: 0, y: 690, width: 375, height: 110},
          {x: 400, y: 550, width: 250, height: 50},
          {x: 375, y: 250, width: 50, height: 350},
          {x: 600, y: 400, width: 200, height: 50},
          {x: 400, y: 250, width: 250, height: 50},
          {x: 0, y: 0, width: 800, height: 150},
          {x: 200, y: 0, width: 50, height: 575},
          {x: 0, y: 250, width: 80, height: 800},
          {x: 375, y: 250, width: 20, height: 550},
          {x: 790, y: 0, width: 10, height: 800},
          {x: 0, y: 785, width: 800, height: 20},
        ];
        var win4 = {x: 0,y: 150,width: 80,height: 100};

        function level5() {
          noStroke();
          scene = 7;
          background(98, 98, 98);
          winbox(win5);
          PHWin(win5H);
          for (var i = 0; i < LevelFiveWalls.length; i++) {
            walls(LevelFiveWalls[i]);
            PlayerHitbox(LevelFiveWalls[i]);
          };
        }

        var LevelFiveWalls = [
          {x: 0, y: 0, width: 800, height: 150},
          {x: 0, y: 250, width: 675, height:40},
          {x: 100, y: 375, width: 700, height: 40},
          {x: 100, y: 375, width: 40, height: 325},
          {x: 250, y: 500, width: 75, height: 300},
          {x: 250, y: 500, width: 450, height: 210},
          {x: 790, y: 0, width: 10, height: 800},
          {x: 0, y: 0, width: 10, height: 800},
          {x: 0, y: 790, width: 800, height: 10}
        ];
        var win5 = {x: 325, y: 710, width: 70, height: 80};
        var win5H = {x: 325, y: 710, width: 60, height: 70};

        function level6() {
          noStroke();
          scene = 8;
          background(98, 98, 98);
          winbox(win6);
          PHWin(win6);
          for (var i = 0; i < LevelSixWalls.length; i++) {
            walls(LevelSixWalls[i]);
            PlayerHitbox(LevelSixWalls[i]);
          };
        }

        var LevelSixWalls = [
          {x: 300, y: 500, width: 25, height: 300},
          {x: 450, y: 500, width: 25, height: 300},
          {x: 150, y: 350, width: 500, height: 30},
          {x: 150, y: 350, width: 25, height: 350},
          {x: 0, y: 0, width: 325, height: 260},
          {x: 450, y: 0, width: 350, height: 260},
          {x: 300, y: 0, width: 25, height: 250},
          {x: 450, y: 0, width: 25, height: 250},
          {x: 625, y: 350, width: 25, height: 350},
          {x: 0, y: 0, width: 40, height: 800},
          {x: 760, y: 0, width: 40, height: 800},
          {x: 0, y: 780, width: 800, height: 20},
          {x: 0, y: 0, width: 800, height: 30}
        ];
        var win6 = {x: 325, y: 30, width: 125, height: 80};

        function level7() {
          noStroke();
          scene = 9;
          background(98, 98, 98);
          winbox(win7);
          PHWin(win7H);
          for (var i = 0; i < LevelSevenWalls.length; i++) {
            walls(LevelSevenWalls[i]);
            PlayerHitbox(LevelSevenWalls[i]);
          };
        }

        var LevelSevenWalls = [
          {x: 0, y: 0, width: 325, height: 100},
          {x: 100, y: 200, width: 600, height: 40},
          {x: 450, y: 375, width: 250, height: 325},
          {x: 100, y: 225, width: 40, height: 450},
          {x: 250, y: 375, width: 75, height: 425},
          {x: 560, y: 0, width: 140, height: 700},
          {x: 790, y: 0, width: 10, height: 800},
          {x: 0, y: 0, width: 20, height: 800},
          {x: 0, y: 780, width: 800, height: 20},
          {x: 450, y: 0, width: 250, height: 100},
          {x: 0, y: 0, width: 800, height: 30},
        ];
        var win7 = {x: 700, y: 20, width: 90, height: 80};
        var win7H = {x: 700, y: 20, width: 90, height: 30};

        function level8() {
          noStroke();
          scene = 10;
          background(98, 98, 98);
          winbox(win8);
          PHWin(win8H);
          for (var i = 0; i < LevelEightWalls.length; i++) {
            walls(LevelEightWalls[i]);
            PlayerHitbox(LevelEightWalls[i]);
          
          };
        };

        var LevelEightWalls = [
          {x: 150, y: 110, width: 650, height: 15},
          {x: 150, y: 110, width: 50, height: 265},
          {x: 0, y: 450, width: 700, height: 75},
          {x: 300, y: 200, width: 400, height: 250},
          {x: 670, y: 400, width: 30, height: 300},
          {x: 0, y: 600, width: 575, height: 200},
          {x: 785, y: 0, width: 15, height: 800},
          {x: 0, y: 0, width: 45, height: 500},
          {x: 0, y: 0, width: 800, height: 10},
          {x: 0, y: 780, width: 800, height: 20},
          {x: 0, y: 0, width: 30, height: 800}
        ];
        var win8 = {x: 30, y: 525, width: 100, height: 75};
        var win8H = {x: 30, y:525, width: 40, height: 75};

        function level9() {
          noStroke();
          scene = 11;
          background(98, 98, 98);
          winbox(win9);
          PHWin(win9);
          for (var i = 0; i < LevelNineWalls.length; i++) {
            walls(LevelNineWalls[i]);
            PlayerHitbox(LevelNineWalls[i]);
          };
        };
        var LevelNineWalls = [
          {x: 120, y: 80, width: 20, height: 750},
          {x: 120, y: 80, width: 575, height: 30},
          {x: 225, y: 200, width: 575, height: 150},
          {x: 225, y: 275, width: 40, height: 400},
          {x: 0, y: 770, width: 800, height: 30},
          {x: 250, y: 200, width: 450, height: 475},
          {x: 0, y: 0, width: 0, height: 700},
          {x: 0, y: 0, width: 800, height: 10},
          {x: 0, y: 600, width: 120, height: 200},
          {x: 790, y: 0, width: 10, height: 800},
          {x: 0, y: 0, width: 20, height: 800}
        ];
        var win9 = {x: 700, y: 350, width: 90, height: 75};

        function level10() {
          textAlign(LEFT, TOP);
          noStroke();
          scene = 12;
          difficulty = 1;
          background (98, 98, 98);
          walls(Jw1); walls(Jw2);
          winbox(win10);
          PHWin(win10);
          PlayerHitbox(Jw1); PlayerHitbox(Jw2);
          fill(255)
          text("Thank you for Playing!", 50, 50);
          textSize(30);
          text("Go to the left to view credits", 50, 100);
        };
        var Jw1 = {x: 0, y: 0, width: 800, height: 300};
        var Jw2 = {x: 0, y: 500, width: 800, height: 300};
        var win10 = {x: 0, y: 300, width: 100, height: 200};

        function Credits() {
          isPlaying = false;
          textAlign(LEFT, TOP)
          console.log(scene);
          scene = 13;
          background(98, 98, 98);
          fill(255);
          textSize(30);
          text("Credits", 50, 50);
          textSize(20);
          text("Game Design: Ivan Bondarenko", 50, 100);
          text("Programming: Ivan Bondarenko", 50, 150);
          text("Playtester(s): James Ayudan", 50, 200);
          text("Press anywhere to return to the main menu", 50, 750);
          win = win + 1;
          mouseClicked = function() {
            scene = 0;
            isPlaying = false;
            timer = 10;
            initTimer = 10;
            GSetup();
          };
        };

//<!-- !  LOOK HERE IF YOU ACCIDENTALLY ENTERED A LEVEL --!>
       GSetup(); //<!--  ! Change this to Setup(); , in case you see anything other than Setup() here. --!>
      };
    };
      //  GENERAL NOTES 1. NAMING CONVENTIONS
      // You might see comments that have the following format: "//<!--" followed by a punctuation mark. This is so that the vscode BetterComments extension highlighting works, as it detects the language as HTML rather than JS.
      // Abnormal scene numbers are used to indicate special scenes.
      // Scene 0 to 3 are the non-game scenes
      // Scene 3 to scene 12 are the levels
      // Scene 666 = Game Over
      // Scene 13 = Win Screen
    var canvas = document.getElementById("mycanvas"); 
    var processingInstance = new Processing(canvas, programCode); 
  </script>
</html>
